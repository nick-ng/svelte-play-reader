import{a as d,t as w}from"../chunks/CIYkWqsw.js";import"../chunks/5xf3rXQf.js";import{N as et,Q as V,T as at,V as u,W as rt,Y as a,Z as r,a as o,X as Y,_ as e,$ as st,b as z}from"../chunks/B4Ye32uY.js";import{e as b,r as ot,s as p}from"../chunks/BdW3lM8a.js";import{i as it}from"../chunks/Ddome9sk.js";import{e as O,b as lt,i as R}from"../chunks/B7JdpwPN.js";import{i as nt}from"../chunks/CfbhqvxB.js";import{s as ct,d as f,b as mt}from"../chunks/C6efE479.js";import{w as ut}from"../chunks/Dtb5cXmJ.js";import{c as pt,C as vt}from"../chunks/se3ZZrr-.js";const B="NICK-WRITER-EDITOR";let G="",M=!0;try{const l=localStorage.getItem(B);typeof l=="string"&&(M=!1,G=l)}catch(l){console.error("error loading editor data",l)}const m=ut(G);m.subscribe(l=>{localStorage.setItem(B,l)}),M&&(async()=>{const l=await fetch("/oss-hamlet-a1-s1.txt");m.set(await l.text())})();var _t=w("<h3>Error</h3> <p> </p>",1),dt=w("<li> </li>"),bt=w("<li><pre> </pre></li>"),ft=w('<li><pre class="w-min bg-gray-200 dark:bg-gray-700"> </pre></li>'),wt=w('<div><h1>Write</h1> <button>Save as Current Production</button> <div><form class="sticky top-1 inline-block w-[65ch] max-w-[48vw]"><textarea class="mt-1 h-[80ch] w-[65ch] max-w-[48vw] resize-none"></textarea> <button class="block" type="button">Hamlet Act I, Scene 1</button> <button class="mt-1 block" type="button">Hamlet Act I, Scene 1-5</button> <button class="mt-1 block" type="button">Hamlet Act I - V</button> <button class="mt-1 block" type="button">MongoDB is Web Scale</button></form> <div class="inline-block w-[65ch] max-w-[48vw] align-top"><!> <h3>Dramatis Personae (ordered by appearance)</h3> <ul class="ml-8 list-decimal"></ul> <details><summary>Debug</summary> <details open><summary> </summary> <ul class="ml-5 list-disc"></ul> <ul class="ml-8 list-disc"></ul> <pre> </pre></details> <details><summary>Scenes</summary> <pre> </pre></details></details></div></div></div>');function Ot(l,Q){et(Q,!1);const[U,X]=ct(),v=()=>mt(m,"$writerEditorStore",U),c=Y(),_=Y();V(()=>v(),()=>{z(c,new vt(v()))}),V(()=>o(c),()=>{z(_,o(c).tokens.filter(t=>t.type==="unknown"))}),at(),nt();var h=wt(),W=a(r(h),2),C=a(W,2),x=r(C),y=r(x);ot(y);var D=a(y,2),N=a(D,2),A=a(N,2),Z=a(A,2);e(x);var H=a(x,2),J=r(H);{var j=t=>{var i=_t(),s=a(st(i),2),n=r(s,!0);e(s),u(()=>p(n,o(c).error)),d(t,i)};it(J,t=>{o(c).error&&t(j)})}var g=a(J,4);O(g,5,()=>o(c).dramatisPersonae,R,(t,i)=>{var s=dt(),n=r(s,!0);e(s),u(()=>p(n,o(i).name)),d(t,s)}),e(g);var k=a(g,2),S=a(r(k),2),E=r(S),q=r(E);e(E);var T=a(E,2);O(T,5,()=>o(_),R,(t,i)=>{var s=bt(),n=r(s),$=r(n,!0);u(()=>p($,JSON.stringify(o(i),null,"  "))),e(n),e(s),d(t,s)}),e(T);var I=a(T,2);O(I,5,()=>o(_),R,(t,i)=>{var s=ft(),n=r(s),$=r(n,!0);e(n),e(s),u(()=>p($,o(i).raw)),d(t,s)}),e(I);var P=a(I,2),F=r(P,!0);u(()=>p(F,JSON.stringify(o(c).tokens,null,"  "))),e(P),e(S);var K=a(S,2),L=a(r(K),2),tt=r(L,!0);u(()=>p(tt,JSON.stringify(o(c).scenes,null,"  "))),e(L),e(K),e(k),e(H),e(C),e(h),u(()=>{k.open=o(_).length>0,p(q,`Tokens - Unknown Count: ${o(_).length??""}`)}),b("click",W,()=>{pt.update(t=>{if(t)return{...t,sourceText:v()};const i=v().split(`
`)[0];return{name:i.startsWith("//")?i.replace(/^\/\//,"").trim():"",sourceText:v(),cast:[],direction:[],updatedTimestamp:Date.now()}})}),lt(y,v,t=>f(m,t)),b("click",D,async()=>{const t=await fetch("/oss-hamlet-a1-s1.txt");f(m,await t.text())}),b("click",N,async()=>{const t=await fetch("/oss-hamlet-a1-full.txt");f(m,await t.text())}),b("click",A,async()=>{const t=await fetch("/oss-hamlet-full.txt");f(m,await t.text())}),b("click",Z,async()=>{const t=await fetch("/mongodb-is-web-scale.txt");f(m,await t.text())}),d(l,h),rt(),X()}export{Ot as component};
