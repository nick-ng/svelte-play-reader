import{a as V,t as A}from"../chunks/CIYkWqsw.js";import"../chunks/5xf3rXQf.js";import{N as je,O as I,a as e,Q as Qe,T as We,V as f,W as Xe,X as S,b as F,Y as s,Z as r,u as m,_ as a}from"../chunks/B4Ye32uY.js";import{e as J,r as Se,s as p}from"../chunks/BdW3lM8a.js";import{e as q,b as P,i as z,a as ie}from"../chunks/B7JdpwPN.js";import{a as ne,s as U,r as w,b as Ze}from"../chunks/C7KqxU5o.js";import{i as Be}from"../chunks/CfbhqvxB.js";import{s as De,a as G,b as Ue}from"../chunks/C6efE479.js";import{o as He}from"../chunks/CDqKfrdJ.js";import{w as et}from"../chunks/Dtb5cXmJ.js";const we="NICK-OPTIONS";let K={auditionVolume:.5,auditionRate:1,auditionNameFilter:"",auditionPhrase:"O, the Pelican. So smoothly doth he crest. A wind god!"};try{const c=localStorage.getItem(we);typeof c!="string"&&(K.auditionNameFilter=navigator.userAgent.toLowerCase().includes("edge")?"natural; english":""),c&&(K={...K,...JSON.parse(c)})}catch(c){console.error("error loading options",c)}const $=et(K);$.subscribe(c=>{localStorage.setItem(we,JSON.stringify(c))});var tt=A('<label><input type="radio" name="gender" required> </label>'),at=A('<label><input type="radio" name="age" required> </label>'),rt=A('<label><input type="radio" name="fluency" required> </label>'),st=A('<div><h2> </h2> <button> </button> <button> </button> <form><div class="flex flex-row"><div class="flex flex-col"><h3>Gender <span> </span></h3> <!></div> <div class="ml-4 flex flex-col"><h3>Age <span> </span></h3> <!></div> <div class="ml-4 flex flex-col"><h3>Fluency (5 = most fluent) <span> </span></h3> <!></div></div> <button type="button" class="button-default mt-1 block">Save</button></form> <span> </span></div>'),ot=A('<div class="max-w-prose"><h1>Audition</h1> <div class="sticky top-0 py-1"><div class="flex flex-row items-end bg-white dark:bg-gray-800"><div><label>Filter: <input type="text"></label> <div class="block">Phrase:</div> <textarea class="block h-40 w-72 resize-none"></textarea></div> <div class="ml-2"><button>Export</button> <button>Import</button> <textarea class="mt-2 block h-40 w-56 resize-none"></textarea></div></div> <div><label class="block text-right">Volume:&nbsp;<input class="align-text-bottom" type="range">&nbsp;<span class="font-mono"> </span></label> <label class="block text-right">Rate:&nbsp;<input class="align-text-bottom" type="range">&nbsp;<span class="font-mono"> </span></label></div></div> <div> </div> <div></div></div>');function bt(c,$e){je($e,!1);const[le,Ce]=De(),i=()=>Ue($,"$optionsStore",le),d=()=>Ue(ne,"$actorsStore",le),M=S(),ke=[],Oe=[],Le=[];let C=S([]),b=S({}),h=S({}),g=S({}),Y=S("");ne.subscribe(o=>{Object.entries(o).forEach(([t,{gender:k,age:R,fluency:O}])=>{I(b,e(b)[t]=k),I(h,e(h)[t]=R),I(g,e(g)[t]=O)})}),He(()=>{F(C,speechSynthesis.getVoices()),speechSynthesis.addEventListener("voiceschanged",()=>{F(C,speechSynthesis.getVoices()),e(C).sort((o,t)=>`${o.lang}${o.name}`.localeCompare(`${t.lang}${t.name}`))})}),Qe(()=>(e(C),i(),d()),()=>{F(M,e(C).filter(o=>i().auditionNameFilter.split(";").every(t=>o.name.toUpperCase().includes(t.trim().toUpperCase()))).sort((o,t)=>d()[o.voiceURI]&&!d()[t.voiceURI]?1:!d()[o.voiceURI]&&d()[t.voiceURI]?-1:`${o.lang}${o.name}`.localeCompare(`${t.lang}${t.name}`)))}),We(),Be();var j=ot(),Q=s(r(j),2),W=r(Q),X=r(W),Z=r(X),ve=s(r(Z));w(ve),a(Z);var ue=s(Z,4);Se(ue),a(X);var pe=s(X,2),de=r(pe),ce=s(de,4);Se(ce),a(pe),a(W);var _e=s(W,2),B=r(_e),x=s(r(B));w(x),U(x,"max",1),U(x,"min",0),U(x,"step",.01);var me=s(x,2),Ne=r(me,!0);f(()=>p(Ne,i().auditionVolume.toFixed(2))),a(me),a(B);var be=s(B,2),y=s(r(be));w(y),U(y,"max",2),U(y,"min",.1),U(y,"step",.01);var he=s(y,2),Ve=r(he,!0);f(()=>p(Ve,i().auditionRate.toFixed(2))),a(he),a(be),a(_e),a(Q);var D=s(Q,2),Fe=r(D);a(D);var ge=s(D,2);q(ge,5,()=>e(M),z,(o,t,k)=>{var R=st(),O=r(R),Pe=r(O,!0);a(O);var E=s(O,2),Ae=r(E);a(E);var T=s(E,2),Ee=r(T);a(T);var H=s(T,2),ee=r(H),te=r(ee),ae=r(te),fe=s(r(ae)),Te=r(fe,!0);a(fe),a(ae);var Je=s(ae,2);q(Je,0,()=>["Male","Female"],z,(v,n)=>{var u=tt(),l=r(u);w(l);var _,L=s(l);a(u),f(()=>{_!==(_=n.toLowerCase())&&(l.value=(l.__value=n.toLowerCase())==null?"":n.toLowerCase()),p(L,` ${n??""}`)}),ie(ke,[k],l,()=>(n.toLowerCase(),e(b)[e(t).voiceURI]),N=>I(b,e(b)[e(t).voiceURI]=N)),V(v,u)}),a(te);var re=s(te,2),se=r(re),xe=s(r(se)),qe=r(xe,!0);a(xe),a(se);var ze=s(se,2);q(ze,0,()=>["Child","Adult","Elderly"],z,(v,n)=>{var u=at(),l=r(u);w(l);var _,L=s(l);a(u),f(()=>{_!==(_=n.toLowerCase())&&(l.value=(l.__value=n.toLowerCase())==null?"":n.toLowerCase()),p(L,` ${n??""}`)}),ie(Oe,[k],l,()=>(n.toLowerCase(),e(h)[e(t).voiceURI]),N=>I(h,e(h)[e(t).voiceURI]=N)),V(v,u)}),a(re);var ye=s(re,2),oe=r(ye),Re=s(r(oe)),Ge=r(Re,!0);a(Re),a(oe);var Ke=s(oe,2);q(Ke,0,()=>[1,2,3,4,5],z,(v,n)=>{var u=rt(),l=r(u);w(l);var _,L=s(l);a(u),f(()=>{_!==(_=n)&&(l.value=(l.__value=n)==null?"":n),p(L,` ${n??""}`)}),ie(Le,[k],l,()=>e(g)[e(t).voiceURI],N=>I(g,e(g)[e(t).voiceURI]=N)),V(v,u)}),a(ye),a(ee);var Me=s(ee,2);a(H);var Ie=s(H,2),Ye=r(Ie,!0);a(Ie),a(R),f(()=>{var v,n,u;Ze(R,`my-1 border p-2 ${(d()[e(t).voiceURI]?"":"bg-gray-100 dark:bg-gray-700")??""}`),p(Pe,e(t).name),p(Ae,`Test (${e(t).lang??""})`),p(Ee,`Test (${e(t).lang??""})`),p(Te,e(b)[e(t).voiceURI]===((v=d()[e(t).voiceURI])==null?void 0:v.gender)?"":"*"),p(qe,e(h)[e(t).voiceURI]===((n=d()[e(t).voiceURI])==null?void 0:n.age)?"":"*"),p(Ge,e(g)[e(t).voiceURI]===((u=d()[e(t).voiceURI])==null?void 0:u.fluency)?"":"*"),p(Ye,e(t).voiceURI)}),J("click",E,()=>{speechSynthesis.cancel();const v=new SpeechSynthesisUtterance(i().auditionPhrase);v.voice=e(t),v.rate=i().auditionRate,v.volume=i().auditionVolume,speechSynthesis.speak(v)}),J("click",T,()=>{speechSynthesis.cancel()}),J("click",Me,()=>{ne.update(v=>(v[e(t).voiceURI]={age:e(h)[e(t).voiceURI],gender:e(b)[e(t).voiceURI],fluency:e(g)[e(t).voiceURI]},v))}),V(o,R)}),a(ge),a(j),f(()=>p(Fe,`Voices: ${e(M).length??""}`)),P(ve,()=>i().auditionNameFilter,o=>G($,m(i).auditionNameFilter=o,m(i))),P(ue,()=>i().auditionPhrase,o=>G($,m(i).auditionPhrase=o,m(i))),J("click",de,()=>{F(Y,JSON.stringify(d()))}),P(ce,()=>e(Y),o=>F(Y,o)),P(x,()=>i().auditionVolume,o=>G($,m(i).auditionVolume=o,m(i))),P(y,()=>i().auditionRate,o=>G($,m(i).auditionRate=o,m(i))),V(c,j),Xe(),Ce()}export{bt as component};
